{% extends "base.html" %}

{% block title %}Settings - Local AI Chatbot{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h5>âš™ï¸ Personal Settings</h5>
        <p style="opacity: 0.9; margin: 0.5rem 0 0 0;">Customize your AI assistant experience</p>
    </div>
    <div class="card-body">
        <form method="POST" action="{{ url_for('auth.update_preferences') }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
            
            <div class="form-group">
                <label for="display_name" class="form-label">ğŸ‘¤ Display Name</label>
                <input type="text" class="form-control" id="display_name" name="display_name" 
                       value="{{ preferences.get_preference('display_name', current_user.username) }}"
                       required>
                <div class="form-text">How the AI assistant should address you</div>
            </div>
            
            <div class="form-group">
                <label for="chat_style" class="form-label">ğŸ’¬ Chat Style</label>
                <select class="form-control" id="chat_style" name="chat_style">
                    {% set current_style = preferences.get_preference('chat_style', 'friendly') %}
                    <option value="friendly" {{ 'selected' if current_style == 'friendly' }}>ğŸ˜Š Friendly & Casual</option>
                    <option value="professional" {{ 'selected' if current_style == 'professional' }}>ğŸ‘” Professional</option>
                    <option value="humorous" {{ 'selected' if current_style == 'humorous' }}>ğŸ˜„ Humorous</option>
                    <option value="concise" {{ 'selected' if current_style == 'concise' }}>ğŸ“ Concise</option>
                    <option value="detailed" {{ 'selected' if current_style == 'detailed' }}>ğŸ“š Detailed</option>
                </select>
                <div class="form-text">Choose the AI's response personality</div>
            </div>
            
            <div class="form-group">
                <label for="response_length" class="form-label">ğŸ“ Response Length</label>
                <select class="form-control" id="response_length" name="response_length">
                    {% set current_length = preferences.get_preference('response_length', 'medium') %}
                    <option value="short" {{ 'selected' if current_length == 'short' }}>âš¡ Short (1-2 sentences)</option>
                    <option value="medium" {{ 'selected' if current_length == 'medium' }}>ğŸ“„ Medium (1-2 paragraphs)</option>
                    <option value="long" {{ 'selected' if current_length == 'long' }}>ğŸ“– Long (Detailed explanations)</option>
                </select>
                <div class="form-text">Preferred length of AI responses</div>
            </div>
            
            <div class="form-group">
                <label class="form-label">â¤ï¸ Topics of Interest</label>
                <div class="form-text" style="margin-bottom: 1rem;">Select topics you're interested in for better conversation context</div>
                
                {% set current_topics = preferences.get_preference('topics_of_interest', []) %}
                {% set topics = [
                    ('technology', 'ğŸ’» Technology'),
                    ('science', 'ğŸ”¬ Science'),
                    ('programming', 'ğŸ‘©â€ğŸ’» Programming'),
                    ('business', 'ğŸ’¼ Business'),
                    ('health', 'ğŸƒâ€â™€ï¸ Health & Fitness'),
                    ('travel', 'âœˆï¸ Travel'),
                    ('food', 'ğŸ³ Food & Cooking'),
                    ('sports', 'âš½ Sports'),
                    ('music', 'ğŸµ Music'),
                    ('movies', 'ğŸ¬ Movies & TV'),
                    ('books', 'ğŸ“š Books & Literature'),
                    ('gaming', 'ğŸ® Gaming'),
                    ('photography', 'ğŸ“¸ Photography'),
                    ('art', 'ğŸ¨ Art & Design'),
                    ('politics', 'ğŸ›ï¸ Politics'),
                    ('education', 'ğŸ“ Education')
                ] %}
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem;">
                    {% for value, label in topics %}
                        <label style="display: flex; align-items: center; gap: 0.5rem; padding: 0.75rem; background: #f8f9fa; border-radius: 0.75rem; cursor: pointer; transition: all 0.3s ease;">
                            <input type="checkbox" name="topics_of_interest" value="{{ value }}" 
                                   {{ 'checked' if value in current_topics }}
                                   style="width: 18px; height: 18px;">
                            <span style="font-size: 0.9rem;">{{ label }}</span>
                        </label>
                    {% endfor %}
                </div>
            </div>
            
            <div style="display: flex; gap: 1rem; margin-top: 2rem;">
                <a href="{{ url_for('chat.chat_interface') }}" class="btn btn-secondary" style="flex: 1;">
                    â† Back to Chat
                </a>
                <button type="submit" class="btn btn-primary" style="flex: 1;">
                    ğŸ’¾ Save Settings
                </button>
            </div>
        </form>
    </div>
</div>

<div class="card">
    <div class="card-body">
        <h6>ğŸ”’ Privacy & Security</h6>
        <div style="display: grid; gap: 1rem; margin-top: 1rem;">
            <div style="display: flex; align-items: flex-start; gap: 1rem;">
                <span style="font-size: 1.5rem;">ğŸ”</span>
                <div>
                    <strong>Data Encryption</strong>
                    <p style="color: #6c757d; margin: 0; font-size: 0.9rem;">All preferences and chat history are encrypted using advanced encryption before storage.</p>
                </div>
            </div>
            <div style="display: flex; align-items: flex-start; gap: 1rem;">
                <span style="font-size: 1.5rem;">ğŸ </span>
                <div>
                    <strong>Local Processing</strong>
                    <p style="color: #6c757d; margin: 0; font-size: 0.9rem;">AI runs locally on this device - no data is sent to external servers, ensuring complete privacy.</p>
                </div>
            </div>
            <div style="display: flex; align-items: flex-start; gap: 1rem;">
                <span style="font-size: 1.5rem;">ğŸ‘¤</span>
                <div>
                    <strong>Account Info</strong>
                    <p style="color: #6c757d; margin: 0; font-size: 0.9rem;">
                        <strong>Username:</strong> {{ current_user.username }}<br>
                        <strong>Created:</strong> {{ current_user.created_at.strftime('%B %d, %Y') }}<br>
                        <strong>Last Login:</strong> {{ current_user.last_login.strftime('%B %d, %Y at %I:%M %p') }}
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}